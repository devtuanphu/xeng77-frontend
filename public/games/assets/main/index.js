System.register("chunks:///_virtual/BetSummaryController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,o,i,r,a,l,u,c,s,b,p,f,h;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose,a=e.asyncToGenerator,l=e.regeneratorRuntime},function(e){u=e.cclegacy,c=e._decorator,s=e.Node,b=e.Label,p=e.Sprite,f=e.UITransform,h=e.Component}],execute:function(){var m,g,y,d,w,x,v,S,k,z,B,C,T,A,M,N,W,L,I,R,U,D,E,O,_,P,F,G,H,J,K,Y,V,j,q,Q,X,Z,$,ee,ne,te,oe,ie,re,ae,le,ue,ce,se,be,pe,fe;u._RF.push({},"41550gGo3JIvYtJ5HS8AqkW","BetSummaryController",void 0);var he=c.ccclass,me=c.property;e("BetSummaryController",(m=he("BetSummaryController"),g=me(s),y=me(s),d=me(s),w=me(s),x=me(s),v=me(s),S=me(s),k=me(s),z=me(s),B=me(s),C=me(s),T=me(s),A=me(s),M=me(s),N=me(s),W=me(s),L=me(s),I=me(s),R=me(s),U=me(s),D=me(s),E=me(s),O=me(s),_=me(s),P=me(s),m((H=n((G=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,o(n,"boxCherry",H,i(n)),o(n,"boxOrange",J,i(n)),o(n,"boxBar",K,i(n)),o(n,"boxStar",Y,i(n)),o(n,"boxBig",V,i(n)),o(n,"boxSmall",j,i(n)),o(n,"boxMango",q,i(n)),o(n,"boxWatermelon",Q,i(n)),o(n,"box777",X,i(n)),o(n,"boxBell",Z,i(n)),o(n,"coin500",$,i(n)),o(n,"coin1000",ee,i(n)),o(n,"coin5000",ne,i(n)),o(n,"coin10000",te,i(n)),o(n,"coin50000",oe,i(n)),o(n,"coin100000",ie,i(n)),o(n,"coin500000",re,i(n)),o(n,"coin1000000",ae,i(n)),o(n,"coin2000000",le,i(n)),o(n,"coin5000000",ue,i(n)),o(n,"coin10000000",ce,i(n)),o(n,"coin50000000",se,i(n)),o(n,"coin100000000",be,i(n)),o(n,"coin150000000",pe,i(n)),o(n,"coin200000000",fe,i(n)),n.optionToNodeMap={},n.coinValueToNodeMap={},n.socket=null,n}t(n,e);var u=n.prototype;return u.formatAmountToK=function(e){return e>=1e3?e/1e3+"k":""+e},u.start=function(){this.optionToNodeMap={CHERRY:this.boxCherry,ORANGE:this.boxOrange,BAR:this.boxBar,STAR:this.boxStar,BIG:this.boxBig,SMALL:this.boxSmall,MANGO:this.boxMango,WATERMELON:this.boxWatermelon,777:this.box777,BELL:this.boxBell},this.coinValueToNodeMap={500:this.coin500,1e3:this.coin1000,5e3:this.coin5000,1e4:this.coin10000,5e4:this.coin50000,1e5:this.coin100000,5e5:this.coin500000,1e6:this.coin1000000,2e6:this.coin2000000,5e6:this.coin5000000,1e7:this.coin10000000,5e7:this.coin50000000,1e8:this.coin100000000,15e7:this.coin150000000,2e8:this.coin200000000},this.fetchBetSummary(),this.setupWebSocket()},u.fetchBetSummary=function(){var e=a(l().mark((function e(){var n,t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://dev-api-sicbo.199tv.live/api/spin/bet-summary");case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("HTTP error! Status: "+n.status);case 6:return e.next=8,n.json();case 8:t=e.sent,console.log("‚úÖ Bet Summary Data:",t),t.success&&Array.isArray(t.data)?this.updateBettingUI(t.data):console.warn("‚ö†Ô∏è D·ªØ li·ªáu bet summary kh√¥ng h·ª£p l·ªá!",t),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("üö® L·ªói khi l·∫•y bet summary:",e.t0);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),u.setupWebSocket=function(){var e=this;this.socket=new WebSocket("ws://54.255.97.220:5566"),this.socket.onopen=function(){console.log("‚úÖ WebSocket k·∫øt n·ªëi th√†nh c√¥ng!"),e.socket.send(JSON.stringify({event:"JOIN",message:"Client ƒë√£ k·∫øt n·ªëi"}))},this.socket.onmessage=function(n){console.log("üì© Nh·∫≠n d·ªØ li·ªáu t·ª´ WebSocket:",n.data);try{var t=JSON.parse(n.data);if(console.log("‚úÖ D·ªØ li·ªáu ƒë√£ parse:",t),!t.event)return void console.warn("‚ö†Ô∏è Kh√¥ng c√≥ event n√†o trong d·ªØ li·ªáu nh·∫≠n ƒë∆∞·ª£c.",t);"UPDATE_BET_SUMMARY"===t.event&&(console.log("üì¢ Nh·∫≠n UPDATE_BET_SUMMARY:",t.data),t.data&&Array.isArray(t.data.data)?e.updateBettingUI(t.data.data):console.warn("‚ö†Ô∏è D·ªØ li·ªáu kh√¥ng ƒë√∫ng format:",t.data))}catch(e){console.error("üö® L·ªói x·ª≠ l√Ω d·ªØ li·ªáu t·ª´ WebSocket:",e,"D·ªØ li·ªáu nh·∫≠n ƒë∆∞·ª£c:",n.data)}},this.socket.onerror=function(e){console.error("‚ùå L·ªói WebSocket:",e)},this.socket.onclose=function(n){console.warn("‚ö†Ô∏è WebSocket b·ªã ƒë√≥ng:",n.reason),setTimeout((function(){return e.setupWebSocket()}),3e3)}},u.updateBettingUI=function(e){for(var n,t=r(e);!(n=t()).done;){var o,i,a=n.value,l=a.option,u=a.totalAmount,c=a.multiplier,s=a.coins;console.log("üîç Update UI cho: "+l+" | T·ªïng c∆∞·ª£c: "+u+" | Multiplier: "+c);var p=this.optionToNodeMap[l];if(p){var f=null==(o=p.getChildByName("level"))?void 0:o.getComponent(b),h=null==(i=p.getChildByName("total"))?void 0:i.getComponent(b),m=p.getChildByName("stack");f?f.string="x"+c:console.warn("‚ö†Ô∏è Level label kh√¥ng t√¨m th·∫•y trong "+p.name),h?h.string=this.formatAmountToK(u):console.warn("‚ö†Ô∏è Total label kh√¥ng t√¨m th·∫•y trong "+p.name),m&&(m.removeAllChildren(),this.renderCoins(m,s))}else console.warn("‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y node UI cho option: "+l)}},u.renderCoins=function(e,n){for(var t=0;t<n.length;t++){var o=n[t],i=this.coinValueToNodeMap[o];if(i){var r=new s("coin-"+o),a=r.addComponent(p);r.addComponent(f).setContentSize(25,25);var l=i.getComponent(p);l&&(a.spriteFrame=l.spriteFrame),e.addChild(r),r.setPosition(-40,3*t-34,0)}else console.warn("‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y node cho Coin c√≥ gi√° tr·ªã "+o)}},n}(h)).prototype,"boxCherry",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=n(G.prototype,"boxOrange",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(G.prototype,"boxBar",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(G.prototype,"boxStar",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(G.prototype,"boxBig",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=n(G.prototype,"boxSmall",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=n(G.prototype,"boxMango",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=n(G.prototype,"boxWatermelon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=n(G.prototype,"box777",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=n(G.prototype,"boxBell",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=n(G.prototype,"coin500",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=n(G.prototype,"coin1000",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=n(G.prototype,"coin5000",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=n(G.prototype,"coin10000",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=n(G.prototype,"coin50000",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=n(G.prototype,"coin100000",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=n(G.prototype,"coin500000",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=n(G.prototype,"coin1000000",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=n(G.prototype,"coin2000000",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=n(G.prototype,"coin5000000",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=n(G.prototype,"coin10000000",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=n(G.prototype,"coin50000000",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=n(G.prototype,"coin100000000",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=n(G.prototype,"coin150000000",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=n(G.prototype,"coin200000000",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=G))||F));u._RF.pop()}}}));

System.register("chunks:///_virtual/BettingController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,r,e,o;return{setters:[function(t){n=t.inheritsLoose},function(t){r=t.cclegacy,e=t._decorator,o=t.Component}],execute:function(){var i;r._RF.push({},"9297fTM2jxMWbwNylmvaQ50","BettingController",void 0);var c=e.ccclass;e.property,t("BettingController",c("BettingController")(i=function(t){function r(){return t.apply(this,arguments)||this}n(r,t);var e=r.prototype;return e.start=function(){},e.update=function(t){},r}(o))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/CarouselController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,n,s,r,o,a,h,l,c,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,a=t.Node,h=t.UITransform,l=t.Component,c=t.tween,u=t.Vec3}],execute:function(){var m,g,p,d,f,v,C;r._RF.push({},"daa48LPC8xCsZ3WN/3wOu5W","CarouselController",void 0);var x=o.ccclass,y=o.property;t("CarouselController",(m=x("CarouselController"),g=y(a),p=y([a]),m((v=i((f=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return i=t.call.apply(t,[this].concat(r))||this,n(i,"maskNode",v,s(i)),n(i,"items",C,s(i)),i.currentIndex=0,i.itemWidth=0,i.spacing=0,i.isAnimating=!1,i}e(i,t);var r=i.prototype;return r.start=function(){if(this.items.length>0){var t=this.items[0].getComponent(h);if(this.itemWidth=t?t.width:0,this.items.length>1){var i=this.items[0].getPosition(),e=this.items[1].getPosition();this.spacing=Math.abs(e.x-i.x)-this.itemWidth}}},r.onNextClicked=function(){var t=this;if(!(this.isAnimating||this.currentIndex>=this.items.length-4)){this.isAnimating=!0;for(var i=Math.min(2,this.items.length-this.currentIndex-4),e=(this.itemWidth+this.spacing)*i,n=function(i){var n=t.items[i];c(n).to(.3,{position:n.position.clone().add(new u(-e,0,0))},{easing:"smooth"}).call((function(){i===t.items.length-1&&(t.isAnimating=!1)})).start()},s=0;s<this.items.length;s++)n(s);this.currentIndex+=i}},r.onPrevClicked=function(){var t=this;if(!(this.isAnimating||this.currentIndex<=0)){this.isAnimating=!0;for(var i=Math.min(2,this.currentIndex),e=(this.itemWidth+this.spacing)*i,n=function(i){var n=t.items[i];c(n).to(.3,{position:n.position.clone().add(new u(e,0,0))},{easing:"smooth"}).call((function(){i===t.items.length-1&&(t.isAnimating=!1)})).start()},s=0;s<this.items.length;s++)n(s);this.currentIndex-=i}},i}(l)).prototype,"maskNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(f.prototype,"items",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=f))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/ChoosenCoinControiler.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,i,r,c,s,l,a,u,h,d,p,g,b,f,C,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.asyncToGenerator,c=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,a=e.Node,u=e.AudioClip,h=e.Vec3,d=e.director,p=e.tween,g=e.Sprite,b=e.Label,f=e.Component,C=e.UITransform,S=e.AudioSource}],execute:function(){var m,v,x,y,B,N,E,k,w;s._RF.push({},"9c3c8w5SPdHi5ZZfgD2QPWa","ChoosenCoinControiler",void 0);var I=l.ccclass,V=l.property;e("ChoosenCoinControiler",(m=I("ChoosenCoinControiler"),v=V(a),x=V(a),y=V(u),m((E=t((N=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))||this).fetchUserInfo=null,t.chips=[],t.currentSelectedChip=null,t.defaultScale=new h(1,1,1),t.selectedScale=new h(1.3,1.3,1),t.selectedCoinSprite=null,t.selectedBetValue=0,o(t,"userNode",E,i(t)),o(t,"boxBettingNodes",k,i(t)),o(t,"betSound",w,i(t)),t}n(t,e);var s=t.prototype;return s.start=function(){var e=this;console.log("‚úÖ Script ChoosenCoinControiler ƒë√£ ƒë∆∞·ª£c kh·ªüi ch·∫°y!"),this.chips=this.node.children,console.log("üéØ T√¨m th·∫•y "+this.chips.length+" node con.");var t=[500,1e3,5e3,1e4,5e4,1e5,5e5,1e6,2e6,5e6,1e7,5e7,1e8,15e7,2e8];this.chips.forEach((function(n,o){n.betValue=t[o]||0,console.log("üí∞ Chip "+n.name+" c√≥ gi√° tr·ªã: "+n.betValue),n.on(a.EventType.TOUCH_END,(function(){console.log("üëâ Clicked on chip: "+n.name+" (Value: "+n.betValue+")"),e.selectChip(n)}))}));var n={boxbetting:"CHERRY","boxbetting-001":"ORANGE","boxbetting-002":"BAR","boxbetting-003":"STAR","boxbetting-004":"BIG","boxbetting-005":"SMALL","boxbetting-006":"MANGO","boxbetting-007":"WATERMELON","boxbetting-008":"777","boxbetting-009":"BELL"};this.boxBettingNodes&&this.boxBettingNodes.forEach((function(e){n[e.name]?(e.name=n[e.name],console.log("üîπ ƒê√£ g√°n t√™n: "+e.name)):console.warn("‚ö†Ô∏è Kh√¥ng t√¨m th·∫•y mapping cho "+e.name)})),this.setupBettingEvents(),d.on("SPIN_ENDED",this.onSpinEnded,this)},s.onDestroy=function(){d.off("SPIN_ENDED",this.onSpinEnded,this)},s.setupBettingEvents=function(){var e=this;this.boxBettingNodes&&this.boxBettingNodes.forEach((function(t){t.on(a.EventType.TOUCH_END,(function(n){e.placeBet(t)}))}))},s.selectChip=function(e){if(console.log("‚ö° X·ª≠ l√Ω ch·ªçn chip: "+e.name),this.currentSelectedChip&&this.currentSelectedChip!==e&&p(this.currentSelectedChip).to(.2,{scale:this.defaultScale},{easing:"quadOut"}).start(),this.currentSelectedChip!==e){p(e).to(.2,{scale:this.selectedScale},{easing:"quadOut"}).start(),this.currentSelectedChip=e;var t=e.getComponent(g);t&&(this.selectedCoinSprite=t.spriteFrame),this.selectedBetValue=e.betValue||0,console.log("üéØ ƒê√£ ch·ªçn chip c√≥ gi√° tr·ªã: "+this.selectedBetValue)}else p(e).to(.2,{scale:this.defaultScale},{easing:"quadOut"}).start(),this.currentSelectedChip=null,this.selectedCoinSprite=null},s.placeBet=function(){var e=r(c().mark((function e(t){var n,o,i,r,s,l,u,d,b,f;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.selectedCoinSprite){e.next=3;break}return console.warn("‚ö†Ô∏è Vui l√≤ng ch·ªçn ƒë·ªìng xu tr∆∞·ªõc khi ƒë·∫∑t c∆∞·ª£c!"),e.abrupt("return");case 3:if(n=localStorage.getItem("userUUID")){e.next=7;break}return console.error("‚ùå Kh√¥ng t√¨m th·∫•y userUUID trong localStorage!"),e.abrupt("return");case 7:return o=t.name,console.log("üí∞ ƒê·∫∑t c∆∞·ª£c "+this.selectedBetValue+" v√†o "+o),i={userId:n,betChoice:o,betAmount:this.selectedBetValue,coins:[this.selectedBetValue]},e.prev=10,e.next=13,fetch("https://dev-api-sicbo.199tv.live/api/spin/place-bet",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});case 13:return r=e.sent,e.next=16,r.json();case 16:if(s=e.sent,!r.ok){e.next=23;break}if(console.log("‚úÖ C∆∞·ª£c th√†nh c√¥ng:",s),s.success){e.next=21;break}return e.abrupt("return");case 21:e.next=24;break;case 23:console.error("‚ùå L·ªói ƒë·∫∑t c∆∞·ª£c:",s);case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(10),console.error("‚ùå L·ªói k·∫øt n·ªëi API:",e.t0);case 29:if(l=t.getChildByName("stack")){e.next=33;break}return console.error("‚ùå Kh√¥ng t√¨m th·∫•y node 'stack' trong boxbetting!"),e.abrupt("return");case 33:l.children.length>=6&&(l.children[0].removeFromParent(),l.children.forEach((function(e,t){var n=new h(-40,3*t-34,0);p(e).to(.3,{position:n},{easing:"quadOut"}).start()}))),u=new a("coin"),u.addComponent(g).spriteFrame=this.selectedCoinSprite,u.addComponent(C).setContentSize(25,25),l.addChild(u),d=new h(-40,3*(l.children.length-1)-34,0),b=this.userNode.worldPosition,u.setWorldPosition(b),p(u).to(.5,{position:d},{easing:"quadOut"}).call((function(){console.log("‚úÖ ƒê·ªìng xu m·ªõi ƒë√£ ƒë∆∞·ª£c ƒë·∫∑t v√†o v·ªã tr√≠ cu·ªëi c√πng!")})).start(),this.betSound&&((f=this.node.getComponent(S))||(f=this.node.addComponent(S)),f.clip=this.betSound,f.play());case 45:case"end":return e.stop()}}),e,this,[[10,26]])})));return function(t){return e.apply(this,arguments)}}(),s.onSpinEnded=function(){console.log("üîî Nh·∫≠n s·ª± ki·ªán: Phi√™n quay k·∫øt th√∫c! C·∫≠p nh·∫≠t UI ho·∫∑c reset c∆∞·ª£c."),this.resetBettingUI()},s.resetBettingUI=function(){var e=this;console.log("üîÑ Reset l·∫°i giao di·ªán ƒë·∫∑t c∆∞·ª£c..."),this.currentSelectedChip=null,this.selectedCoinSprite=null,this.selectedBetValue=0,this.chips.forEach((function(t){t.setScale(e.defaultScale)})),this.boxBettingNodes.forEach((function(e){var t,n=e.getChildByName("stack"),o=null==(t=e.getChildByName("total"))?void 0:t.getComponent(b);n&&n.removeAllChildren(),o&&(o.string="0k")}))},t}(f)).prototype,"userNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(N.prototype,"boxBettingNodes",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=t(N.prototype,"betSound",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=N))||B));s._RF.pop()}}}));

System.register("chunks:///_virtual/FullScreenController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,r,l,o;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,r=e._decorator,l=e.sys,o=e.Component}],execute:function(){var s;t._RF.push({},"1d786gy0tZMCYh7cQXIf5zx","FullScreenController",void 0);var c=r.ccclass;e("FullScreenController",c("FullScreenController")(s=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var r=t.prototype;return r.start=function(){this.isMobileDevice()&&this.enableFullScreen()},r.isMobileDevice=function(){return l.isMobile||/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)},r.enableFullScreen=function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen().catch((function(e){console.warn("Failed to enable fullscreen mode:",e)})):e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():console.warn("Fullscreen API is not supported on this browser.")},t}(o))||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameAudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var e,n,t,r,a;return{setters:[function(o){e=o.inheritsLoose},function(o){n=o.cclegacy,t=o._decorator,r=o.AudioSource,a=o.Component}],execute:function(){var c;n._RF.push({},"df003CKD1BIdZQ0PSGIBUyZ","GameAudioManager",void 0);var u=t.ccclass;t.property,o("GameAudioManager",u("GameAudioManager")(c=function(o){function n(){for(var e,n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return(e=o.call.apply(o,[this].concat(t))||this).audioSource=null,e}return e(n,o),n.prototype.onLoad=function(){this.audioSource=this.getComponent(r),"true"===localStorage.getItem("userInteracted")&&this.audioSource?(console.log("Ph√°t nh·∫°c n·ªÅn v√¨ ng∆∞·ªùi d√πng ƒë√£ t∆∞∆°ng t√°c tr∆∞·ªõc ƒë√≥."),this.audioSource.play()):console.log("Ng∆∞·ªùi d√πng ch∆∞a t∆∞∆°ng t√°c ·ªü trang ƒëƒÉng nh·∫≠p.")},n}(a))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var e,t,n,i,o,s,a,c,l,u;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.inheritsLoose,n=r.initializerDefineProperty,i=r.assertThisInitialized},function(r){o=r.cclegacy,s=r._decorator,a=r.Sprite,c=r.Label,l=r.director,u=r.Component}],execute:function(){var g,h,p,d,f,L,b;o._RF.push({},"553e21x8c1EHLeaw2o3cQOG","LoadingController",void 0);var y=s.ccclass,P=s.property;r("LoadingController",(g=y("LoadingController"),h=P(a),p=P(c),g((L=e((f=function(r){function e(){for(var e,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return e=r.call.apply(r,[this].concat(o))||this,n(e,"circleSprite",L,i(e)),n(e,"loadingLabel",b,i(e)),e.currentProgress=0,e}t(e,r);var o=e.prototype;return o.start=function(){this.startLoading()},o.startLoading=function(){this.schedule(this.updateProgress,.05)},o.updateProgress=function(){this.currentProgress>=1?this.unschedule(this.updateProgress):(this.currentProgress+=.02,this.circleSprite&&(this.circleSprite.fillRange=-this.currentProgress),this.loadingLabel&&(this.loadingLabel.string=Math.floor(100*this.currentProgress)+"%"),this.currentProgress>=1&&l.loadScene("MainScene",(function(r){r?console.error("Kh√¥ng th·ªÉ chuy·ªÉn sang MainScene",r):console.log("Chuy·ªÉn sang MainScene th√†nh c√¥ng!")})))},e}(u)).prototype,"circleSprite",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(f.prototype,"loadingLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=f))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./BetSummaryController.ts","./BettingController.ts","./CarouselController.ts","./ChoosenCoinControiler.ts","./FullScreenController.ts","./GameAudioManager.ts","./LoadingController.ts","./MoveRing.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MoveRing.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ChoosenCoinControiler.ts"],(function(e){var t,n,o,r,s,i,l,u,a,c,h,p,d,b,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized,s=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){l=e.cclegacy,u=e._decorator,a=e.Node,c=e.Label,h=e.UITransform,p=e.Vec3,d=e.Component,b=e.director},function(e){f=e.ChoosenCoinControiler}],execute:function(){var g,m,v,N,S,I,w,k,R,L,x,O,M,C,T,y,E,P;l._RF.push({},"db5836t8IxFnKFX0cNSJRhb","MoveRing",void 0);var U=u.ccclass,A=u.property;e("MoveRing",(g=U("MoveRing"),m=A([a]),v=A(c),N=A(c),S=A(c),I=A(c),w=A(c),k=A(a),g((x=t((L=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t=e.call.apply(e,[this].concat(s))||this,o(t,"moveInterval",x,r(t)),o(t,"targetNodes",O,r(t)),o(t,"countdownLabel",M,r(t)),o(t,"spinIdLabel",C,r(t)),o(t,"numberResultLabel",T,r(t)),o(t,"userNameLabel",y,r(t)),o(t,"userBalanceLabel",E,r(t)),o(t,"choosenCoinControllerNode",P,r(t)),t.currentTargetIndex=0,t.countdown=30,t.spinId="N/A",t.spinStatus="PENDING",t.numberResult="",t.socket=void 0,t.isSpinning=!0,t.userName="",t.userBalance=0,t}n(t,e);var l=t.prototype;return l.start=function(){var e=s(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("üîÑ MoveRing Component Started"),e.next=3,this.fetchPreviousNumberResult();case 3:return e.next=5,this.fetchUserInfo();case 5:return e.next=7,this.fetchCurrentSpin();case 7:this.targetNodes.length>0&&(this.node.setPosition(this.targetNodes[this.currentTargetIndex].position),this.schedule(this.moveToNextNode,this.moveInterval)),this.setupWebSocket(),this.choosenCoinControllerNode?(t=this.choosenCoinControllerNode.getComponent(f))?(t.fetchUserInfo=this.fetchUserInfo.bind(this),console.log("‚úÖ G√°n fetchUserInfo th√†nh c√¥ng!")):console.error("‚ùå Kh√¥ng t√¨m th·∫•y component ChoosenCoinControiler tr√™n node!"):console.error("‚ùå choosenCoinControllerNode ch∆∞a ƒë∆∞·ª£c g√°n trong Cocos Creator!");case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),l.getUserUUIDFromLocalStorage=function(){var e=localStorage.getItem("userUUID");return e||(console.error("No userUUID found in Local Storage."),null)},l.fetchCurrentSpin=function(){var e=s(i().mark((function e(){var t,n,o,r,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("üåê Fetching current spin session from API..."),e.next=4,fetch("http://127.0.0.1:5555/api/spin/current",{method:"GET",headers:{"Content-Type":"application/json"}});case 4:if((o=e.sent).ok){e.next=7;break}throw new Error("HTTP error! Status: "+o.status);case 7:return e.next=9,o.text();case 9:if(r=e.sent){e.next=12;break}throw new Error("Empty response from API");case 12:s=JSON.parse(r),console.log("‚úÖ API Response:",s),this.countdown=null!=(t=s.countdown)?t:this.countdown,this.spinId=null!=(n=s.spinId)?n:this.spinId,this.spinStatus=s.status||"PENDING",void 0!==s.numberResult&&null!==s.numberResult&&(this.numberResult=s.numberResult.toString()),this.updateLabels(),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),console.error("üö® Error fetching spin data:",e.t0);case 24:case"end":return e.stop()}}),e,this,[[0,21]])})));return function(){return e.apply(this,arguments)}}(),l.setupWebSocket=function(){var e=this;this.socket=new WebSocket("ws://54.255.97.220:5566"),this.socket.onopen=function(){console.log("‚úÖ WebSocket k·∫øt n·ªëi th√†nh c√¥ng")},this.socket.onmessage=s(i().mark((function t(n){var o,r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("üì© Nh·∫≠n d·ªØ li·ªáu t·ª´ WebSocket:",n.data),t.prev=1,"COMPLETED"!==(o=JSON.parse(n.data)).status){t.next=9;break}return console.log("üèÜ Nh·∫≠n k·∫øt qu·∫£ quay! C·∫≠p nh·∫≠t giao di·ªán..."),t.next=7,e.fetchUserInfo();case 7:b.emit("SPIN_ENDED"),setTimeout((function(){var t={event:"result_confirmed",spinId:o.spinId};e.socket.send(JSON.stringify(t)),console.log("‚úÖ G·ª≠i x√°c nh·∫≠n k·∫øt qu·∫£ ƒë√£ render:",t)}),2e3);case 9:if(void 0!==o.spinId&&(e.spinId=o.spinId),void 0!==o.countdown&&(e.countdown=o.countdown),void 0!==o.status&&(e.spinStatus=o.status),void 0!==o.numberResult&&(e.numberResult=o.numberResult.toString()),r=e.getUserUUIDFromLocalStorage(),"balance_update"===o.event&&(console.log("üí∞ Nh·∫≠n s·ª± ki·ªán balance_update:",o),o.data.userId===r&&(console.log("‚úÖ C·∫≠p nh·∫≠t s·ªë d∆∞ t·ª´ "+e.userBalance+" -> "+o.data.newBalance),e.userBalance=o.data.newBalance,e.updateLabels())),e.updateLabels(),"SPINNING"===o.status&&(console.log("‚è≥ V√≤ng quay b·∫Øt ƒë·∫ßu... G·ª≠i k·∫øt qu·∫£ l√™n Backend"),e.sendSpinResultToServer()),"COMPLETED"!==o.status){t.next=22;break}return console.log("üîÑ Phi√™n quay k·∫øt th√∫c! C·∫≠p nh·∫≠t s·ªë d∆∞ ng∆∞·ªùi d√πng..."),t.next=21,e.fetchUserInfo();case 21:b.emit("SPIN_ENDED");case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(1),console.error("üö® L·ªói khi x·ª≠ l√Ω d·ªØ li·ªáu t·ª´ WebSocket:",t.t0);case 27:case"end":return t.stop()}}),t,null,[[1,24]])}))),this.socket.onerror=function(e){console.error("‚ùå L·ªói WebSocket:",e)},this.socket.onclose=function(t){console.warn("‚ö†Ô∏è WebSocket b·ªã ƒë√≥ng:",t.reason),setTimeout((function(){return e.setupWebSocket()}),3e3)}},l.updateLabels=function(){this.countdownLabel?this.countdownLabel.string="SPINNING"===this.spinStatus?"00":""+this.countdown:console.warn("‚ö†Ô∏è Countdown label component not found."),this.spinIdLabel?this.spinIdLabel.string=""+this.spinId:console.warn("‚ö†Ô∏è Spin ID label component not found."),this.numberResultLabel?this.numberResultLabel.string=""!==this.numberResult?""+this.numberResult:"":console.warn("‚ö†Ô∏è Number result label component not found."),"SPINNING"===this.spinStatus||"COMPLETED"===this.spinStatus?this.isSpinning&&(console.log("‚è∏ D·ª´ng v√≤ng quay..."),this.unschedule(this.moveToNextNode),this.isSpinning=!1):"PENDING"===this.spinStatus&&(this.isSpinning||(console.log("‚ñ∂Ô∏è Ti·∫øp t·ª•c v√≤ng quay..."),this.schedule(this.moveToNextNode,this.moveInterval),this.isSpinning=!0)),this.userNameLabel&&(this.userNameLabel.string=""+this.userName),this.userBalanceLabel&&(this.userBalanceLabel.string=""+this.userBalance.toLocaleString())},l.moveToNextNode=function(){this.currentTargetIndex<this.targetNodes.length-1?this.currentTargetIndex++:this.currentTargetIndex=0;var e=this.targetNodes[this.currentTargetIndex],t=e.position;e.setSiblingIndex(e.parent.children.length-1),this.node.setPosition(t);var n=this.node.getComponent(h),o=e.getComponent(h);if(n&&o){var r=n.contentSize.width,s=n.contentSize.height,i=(o.contentSize.width+30)/r,l=(o.contentSize.height+30)/s;this.node.setScale(new p(i,l,1))}else console.warn("‚ö†Ô∏è UITransform component not found on nodes.")},l.fetchPreviousNumberResult=function(){var e=s(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://dev-api-sicbo.199tv.live/api/spin/previous-number-result");case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("HTTP error! Status: "+t.status);case 6:return e.next=8,t.json();case 8:n=e.sent,this.numberResult=n.numberResult.toString(),console.log("Previous number result fetched: "+this.numberResult),this.updateLabels(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Error fetching previous number result:",e.t0);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(){return e.apply(this,arguments)}}(),l.fetchUserInfo=function(){var e=s(i().mark((function e(){var t,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getUserUUIDFromLocalStorage()){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,fetch("https://dev-api-sicbo.199tv.live/api/users/"+t,{method:"GET",headers:{"Content-Type":"application/json"}});case 6:if((n=e.sent).ok){e.next=9;break}throw new Error("HTTP error! Status: "+n.status);case 9:return e.next=11,n.json();case 11:o=e.sent,console.log("User Info Fetched:",o),this.userName=o.data.full_name||"Unknown",this.userBalance=o.data.coin_balance||0,e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),console.error("Error fetching user info:",e.t0);case 20:case"end":return e.stop()}}),e,this,[[3,17]])})));return function(){return e.apply(this,arguments)}}(),l.sendSpinResultToServer=function(){if(this.socket&&this.socket.readyState===WebSocket.OPEN){var e=this.targetNodes[this.currentTargetIndex];if(e){var t=e.name;console.log("üéØ V√≤ng quay d·ª´ng t·∫°i: "+t);var n={slot1:{chosenOption:"WATERMELON",resultMultiplier:1},slot2:{chosenOption:"ORANGE",resultMultiplier:3},slot3:{chosenOption:"BELL",resultMultiplier:1},slot4:{chosenOption:"BAR",resultMultiplier:25},slot5:{chosenOption:"BAR",resultMultiplier:50},slot6:{chosenOption:"BAR",resultMultiplier:100},slot7:{chosenOption:"MANGO",resultMultiplier:1},slot8:{chosenOption:"STAR",resultMultiplier:1},slot9:{chosenOption:"ORANGE",resultMultiplier:1},slot10:{chosenOption:"CHERRY",resultMultiplier:3},slot11:{chosenOption:"LUCKY",resultMultiplier:100},slot12:{chosenOption:"WATERMELON",resultMultiplier:1},slot13:{chosenOption:"CHERRY",resultMultiplier:1},slot14:{chosenOption:"WATERMELON",resultMultiplier:3},slot15:{chosenOption:"STAR",resultMultiplier:1},slot16:{chosenOption:"777",resultMultiplier:3},slot17:{chosenOption:"777",resultMultiplier:1},slot18:{chosenOption:"MANGO",resultMultiplier:1},slot19:{chosenOption:"BELL",resultMultiplier:3},slot20:{chosenOption:"ORANGE",resultMultiplier:1},slot21:{chosenOption:"STAR",resultMultiplier:3},slot22:{chosenOption:"CHERRY",resultMultiplier:1},slot23:{chosenOption:"JACKPOT",resultMultiplier:100},slot24:{chosenOption:"MANGO",resultMultiplier:3}}[t];if(n){var o={event:"spinResult",data:{chosenOption:n.chosenOption,resultMultiplier:n.resultMultiplier,numberResult:Math.floor(13*Math.random())+1}};this.socket.send(JSON.stringify(o)),console.log("üì© G·ª≠i k·∫øt qu·∫£ quay:",o)}else console.error("‚ùå Kh√¥ng t√¨m th·∫•y √°nh x·∫° cho "+t)}else console.error("‚ùå Kh√¥ng t√¨m th·∫•y node d·ª´ng quay!")}else console.error("‚ùå WebSocket ch∆∞a k·∫øt n·ªëi ho·∫∑c ƒë√£ ƒë√≥ng!")},t}(d)).prototype,"moveInterval",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),O=t(L.prototype,"targetNodes",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=t(L.prototype,"countdownLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(L.prototype,"spinIdLabel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(L.prototype,"numberResultLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(L.prototype,"userNameLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(L.prototype,"userBalanceLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(L.prototype,"choosenCoinControllerNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=L))||R));l._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});